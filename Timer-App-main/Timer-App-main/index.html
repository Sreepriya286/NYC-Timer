<script>
let totalSeconds = 0;
let timerInterval;

function setTimer() {
    const minutes = parseInt(document.getElementById('minutes').value) || 0;
    const seconds = parseInt(document.getElementById('seconds').value) || 0;
    totalSeconds = minutes * 60 + seconds;
    updateDisplay();
    document.getElementById('timer-container').style.display = 'block';
    document.body.style.backgroundColor = ''; // reset background
}

function startTimer() {
    if (timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(() => {
        if (totalSeconds > 0) {
            totalSeconds--;
            handleVisibility();
            updateDisplay();
        } else {
            clearInterval(timerInterval);
        }
    }, 1000);
}

function pauseTimer() {
    clearInterval(timerInterval);
}

function resetTimer() {
    clearInterval(timerInterval);
    totalSeconds = 0;
    updateDisplay();
    document.getElementById('timer-container').style.display = 'block';
    document.body.style.backgroundColor = '';
}

function addTime() {
    totalSeconds += 60;
    handleVisibility();
    updateDisplay();
}

function subtractTime() {
    totalSeconds = Math.max(0, totalSeconds - 60);
    handleVisibility();
    updateDisplay();
}

function playBellNow() {
    alert('Bell!'); // replace with actual bell sound if needed
}

// Update the timer display
function updateDisplay() {
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    document.getElementById('timer-display').textContent =
        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

// Handle visibility according to your requirement
function handleVisibility() {
    if (totalSeconds <= 5 * 60) {
        // Show timer in last 5 minutes
        document.getElementById('timer-container').style.display = 'block';
        document.body.style.backgroundColor = ''; // normal background
    } else if (totalSeconds <= totalSecondsInitial - 60) {
        // Hide timer after first minute
        document.getElementById('timer-container').style.display = 'none';
        document.body.style.backgroundColor = 'black'; // dark screen
    }
}

// Store initial time for reference
let totalSecondsInitial = 0;
document.getElementById('minutes').addEventListener('change', () => {
    totalSecondsInitial = parseInt(document.getElementById('minutes').value) * 60;
});
document.getElementById('seconds').addEventListener('change', () => {
    totalSecondsInitial += parseInt(document.getElementById('seconds').value);
});
</script>



        

